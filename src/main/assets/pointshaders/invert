precision lowp float;
varying float time;
varying float size;
varying vec3 color;
varying vec2 position;
uniform sampler2D texture;
uniform sampler2D backbuffer;
uniform vec2 texturesize;
uniform mat4 textureMatrix;
void main() {
  vec2 scale = (vec2(size) / texturesize);
  vec2 coord = gl_PointCoord -0.5;
  vec2 point = coord * scale;
  vec2 trueposition = position / 2.0 + 0.5;
  vec2 uv = trueposition + vec2(point.x, -point.y);
  float alpha = texture2D(texture, gl_PointCoord).a;
  vec3 color = vec3(1.0) - vec3(texture2D(backbuffer, uv));
  gl_FragColor = vec4(color, alpha);
}
